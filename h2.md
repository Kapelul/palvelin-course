# H2 Soitto kotiin

### x) 

> Two Machine Virtual Network With Debian 11 Bullseye and Vagrant
```
$ sudo apt-get update

$ sudo apt-get install vagrant virtualbox
```

-Komennoilla asentaa vagrantin debian/ubuntu

-Sivulla olevalla Vagrantfile "asetuksilla", kone asentaa kaksi debian/bullseye virtuaalikonetta. (shell ja scripti asetus täytyi poistaa, jos ei laittanut scriptiä, muuten ei toiminut)

-Ping komennoilla voi testata yhteyden toimivuuden

>Salt Quickstart – Salt Stack Master and Slave on Ubuntu Linux
```
master$ sudo apt-get update

master$ sudo apt-get -y install salt-master

master$ hostname -I

10.0.0.88
```
-Komento asentaa Salt "Master" koneen.

-Jos koneessa on palomuuri, 4505/4506 (tcp) portit.
```
slave$ sudo apt-get update

slave$ sudo apt-get -y install salt-minion
```
-Asentaa Salt "Slave" koneen.

-Orjan täytyy tietää, missä "herra" on. Editoidaan /etc/salt/minion tiedostossa.
```
master$ sudo salt-key -A
```
-Hyväksytään orjan avain herra-koneella

>Hello Salt Infra-as-Code

-/srv/salt on kansio, mikä on jaettu kaikilla orja-koneilla.

-srv/salt/hello kansiossa voisi olla "hello" moduuli. (Sisältää kaiken liittyen "hello" moduuliin.

-init.sls, joka on hello-kansiossa voi kirjoittaa esimerkiksi idempotentti koodia.

# a)

Tehtävässä käytin terokarvinen.com olevaa "Vagrantfile" asetuksia, mikä asensi kaksi virtuaalikonetta (scriptiä en laittanut, joten asetuksista piti poistaa shell ja script osio). Koneet asentuivat
onnistuneesti. Testasin yhteyden toimivuutta ping komennolla käyttäen koneille asetettuja IP-osoitteita. Pingaus toimi ja koneet ovat yhteyksissä toisiinsa. Pingasin myös 8.8.8.8 osoitetta, mikä toimi.

![ping3](https://github.com/Kapelul/palvelin-course/assets/165004665/c4536a87-cd47-46d2-b15d-4ebd34f7c318)

# b) c)
```
master$ sudo apt-get update
master$ sudo apt-get -y install salt-master
master$ hostname -I
10.0.0.88
```
Herra-koneen asennus onnistui tällä komennolla virtuaalikoneilla (vagrant). 
```
slave$ sudo apt-get update
slave$ sudo apt-get -y install salt-minion
```
Orjan asennus onnistui taasen tällä komnennolla. Orjan asentamisen jälkeen, muokkasin /etc/salt/minion tiedostoa, jotta orja saa yhteyden herraan (10.0.0.88), sekä käynnistin orja daemonin uudelleen. Käynnistämisen jälkeen
palasin herra koneelle ja hyväksyin orjan avaimen
```
master$ sudo salt-key -A
```
komennolla. (t001 on herra ja t002 on orja)

![whoami](https://github.com/Kapelul/palvelin-course/assets/165004665/12acfd44-52c7-457f-a3df-a07778ceb9d0)

